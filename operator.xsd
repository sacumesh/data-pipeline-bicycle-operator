<!-- Replace TourEventType definition with the strict variant below -->
<xs:complexType name="TourEventType">
    <xs:sequence>
        <xs:element name="StartDate" type="xs:date"/>
        <xs:element name="EndDate" type="xs:date"/>
        <xs:element name="MaxParticipants" type="xs:integer"/>

        <!-- Guides assigned to this event -->
        <xs:element name="Guides">
            <xs:complexType>
                <xs:sequence>
                    <xs:element name="GuideRef" maxOccurs="unbounded">
                        <xs:complexType>
                            <xs:attribute name="ref" type="xs:IDREF" use="required"/>
                        </xs:complexType>
                    </xs:element>
                </xs:sequence>
            </xs:complexType>
        </xs:element>

        <!-- Cycling routes used in this event (REQUIRED).
             We require at least one CyclingRouteRef so that every TourEvent
             explicitly references one or more predefined CyclingRoute elements. -->
        <xs:element name="CyclingRoutes">
            <xs:complexType>
                <xs:sequence>
                    <!-- Require at least one route reference -->
                    <xs:element name="CyclingRouteRef" maxOccurs="unbounded" minOccurs="1">
                        <xs:complexType>
                            <xs:attribute name="ref" type="xs:IDREF" use="required"/>
                        </xs:complexType>
                    </xs:element>
                </xs:sequence>
            </xs:complexType>
        </xs:element>

        <!-- Bookings for this event -->
        <xs:element name="EventBookings">
            <xs:complexType>
                <xs:sequence>
                    <xs:element name="Booking" type="BookingType" minOccurs="0" maxOccurs="unbounded"/>
                </xs:sequence>
            </xs:complexType>
        </xs:element>

    </xs:sequence>
    <xs:attribute name="id" type="xs:ID" use="required"/>
</xs:complexType>
